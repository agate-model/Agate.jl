<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>DARWIN · Agate.jl</title><meta name="title" content="DARWIN · Agate.jl"/><meta property="og:title" content="DARWIN · Agate.jl"/><meta property="twitter:title" content="DARWIN · Agate.jl"/><meta name="description" content="Documentation for Agate.jl."/><meta property="og:description" content="Documentation for Agate.jl."/><meta property="twitter:description" content="Documentation for Agate.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Agate.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">About</a></li><li><span class="tocitem">Models</span><ul><li><a class="tocitem" href="../nipizd/">NiPiZD</a></li><li class="is-active"><a class="tocitem" href>DARWIN</a></li></ul></li><li><a class="tocitem" href="../library/">Library</a></li><li><a class="tocitem" href="../examples/">Examples</a></li><li><a class="tocitem" href="../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Models</a></li><li class="is-active"><a href>DARWIN</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>DARWIN</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/agate-model/Agate.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/agate-model/Agate.jl/blob/main/docs/src/darwin.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h3 id="Agate.jl-DARWIN-model"><a class="docs-heading-anchor" href="#Agate.jl-DARWIN-model">Agate.jl-DARWIN model</a><a id="Agate.jl-DARWIN-model-1"></a><a class="docs-heading-anchor-permalink" href="#Agate.jl-DARWIN-model" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Agate.Constructors.DARWIN.construct" href="#Agate.Constructors.DARWIN.construct"><code>Agate.Constructors.DARWIN.construct</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">construct(;
    n_phyto=2,
    n_zoo=2,
    phyto_diameters=Dict(
        &quot;min_diameter&quot; =&gt; 2, &quot;max_diameter&quot; =&gt; 10, &quot;splitting&quot; =&gt; &quot;log_splitting&quot;
    ),
    zoo_diameters=Dict(
        &quot;min_diameter&quot; =&gt; 20, &quot;max_diameter&quot; =&gt; 100, &quot;splitting&quot; =&gt; &quot;linear_splitting&quot;
    ),
    DIC_dynamics=DIC_geider_light,
    PO4_dynamics=PO4_geider_light_fixed_ratios,
    DIN_dynamics=DIN_geider_light_fixed_ratios,
    POC_dynamics=POC_typical,
    DOC_dynamics=DOC_typical,
    PON_dynamics=PON_typical,
    DON_dynamics=DON_typical,
    POP_dynamics=POP_typical,
    DOP_dynamics=DOP_typical,
    phyto_dynamics=phytoplankton_growth_two_nutrients_geider_light,
    zoo_dynamics=zooplankton_growth_simplified,
    phyto_args=DEFAULT_PHYTO_ARGS,
    zoo_args=DEFAULT_ZOO_ARGS,
    interaction_args=DEFAULT_INTERACTION_ARGS,
    bgc_args=DEFAULT_BGC_ARGS,
    palatability_matrix=nothing,
    assimilation_efficiency_matrix=nothing,
) -&gt; DataType</code></pre><p>Construct an Agate.jl-DARWIN model abstract type.</p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>This model is in active development and has not been validated against <code>MITgcm-DARWIN</code>.</p></div></div><div class="admonition is-category-formulation"><header class="admonition-header">Formulation</header><div class="admonition-body"><p>TRACERS:     </p><p>∂t cⱼ = <span>$Uⱼ$</span>DIC - <span>$Mⱼ$</span> + <span>$Gⱼ$</span> - <span>$gⱼ$</span></p><p>∂t DIC = ∑(<span>$Uⱼ$</span> DIC) + <span>$R$</span>DOC + <span>$R$</span>POC</p><p>∂t DIN = ∑(<span>$Uⱼ$</span>DIC * <span>$Qⱼ$</span>N)  + <span>$R$</span>DON + <span>$R$</span>PON</p><p>∂t PO4 = ∑(<span>$Uⱼ$</span>DIC * <span>$Qⱼ$</span>P)  + <span>$R$</span>DOP + <span>$R$</span>POP</p><p>∂t DOC = ∑(<span>$Mⱼ$</span>DOC) + <span>$g$</span>DOC - <span>$R$</span>DOC</p><p>∂t DON = ∑(<span>$Mⱼ$</span>DOC * <span>$Qⱼ$</span>N) + <span>$g$</span>DON - <span>$R$</span>DON</p><p>∂t DOP = ∑(<span>$Mⱼ$</span>DOC * <span>$Qⱼ$</span>P) + <span>$g$</span>DOP - <span>$R$</span>DOP</p><p>∂t POC = ∑(<span>$Mⱼ$</span>POC) + <span>$g$</span>POC - <span>$R$</span>POC</p><p>∂t PON = ∑(<span>$Mⱼ$</span>POC * <span>$Qⱼ$</span>N) + <span>$g$</span>PON - <span>$R$</span>PON</p><p>∂t POP = ∑(<span>$Mⱼ$</span>POC * <span>$Qⱼ$</span>P) + <span>$g$</span>POP - <span>$R$</span>POP</p><p>where:</p><ul><li><span>$U$</span> = uptake</li><li><span>$R$</span> = remineralization</li><li><span>$M$</span> = mortality</li><li><span>$g, G$</span> = grazing losses and gains</li><li><span>$Q$</span> = plankton elemental ratios</li></ul><p>TRAITS:</p><p>μmax, KR, gmax = a*Volume^b</p><p>palat = η/(1+(<span>$ratio$</span>-<span>$opt$</span>)^2)^σ</p><p>where:</p><ul><li>μmax = maximum photosynthetic growth</li><li>KR = nutrient half saturation</li><li>gmax = maximum predation rate</li><li>palat = palatability</li><li><span>$ratio$</span> = predator to prey size ratio (diameter)</li><li><span>$opt$</span> = predator to prey size optimum (diameter)</li><li>η = prey protection</li><li>σ = predator specificity</li></ul></div></div><p>This constructor builds an Agate.jl-DARWIN model with two plankton functional types: phytoplankton (P) and zooplankton (Z), each of which can be specified to have any number of size classes (<code>n_phyto</code> and <code>n_zoo</code>). In addition to plankton, the constructor implements idealized dissolved inorganic carbon (DIC), particulate organic matter (POC, POP, PON), dissolved organic  matter (DOC, DOP, DON) and two nutrients (DIN and PO4) cycling by default, although more complex elemental cycling can also be defined using the <code>nutrient_dynamics</code> and <code>detritus_dynamics</code>  arguments. </p><p>During model construction, the size of each plankton determines photosynthetic growth rates, nutrient half saturation constants, predation rates, and optionally predator-prey assimilation and palatability values. Alternatively, if manually defined predator-prey assimilation and palatability values are desired, these can be defined using the <code>palatability_matrix</code> and <code>assimilation_efficiency_matrix</code> arguments.</p><p>Note that if non-default <code>*_dynamics</code> expressions are passed, the relevant <code>*_args</code> also need to be specified.</p><p>The type specification includes a photosynthetic active radiation (PAR) auxiliary field.</p><p><strong>Arguments</strong></p><ul><li><code>n_phyto</code>: number of phytoplankton to include in the model</li><li><code>n_zoo</code>: number of zooplankton to include in the model</li><li><code>phyto_diameters</code>: dictionary from which <code>n_phyto</code> diameters can be computed or a list of   values to use</li><li><code>zoo_diameters</code>: dictionary from which <code>zoo</code> diameters can be computed or a list of   values to use</li><li><code>DIC_dynamics</code>: expression describing how DIC changes over time, see <code>Agate.Models.Tracers</code></li><li><code>PO4_dynamics</code>: expression describing how PO4 changes over time, see <code>Agate.Models.Tracers</code></li><li><code>DIN_dynamics</code>: expression describing how DIN changes over time, see <code>Agate.Models.Tracers</code></li><li><code>POC_dynamics</code>: expression describing how POC changes over time, see <code>Agate.Models.Tracers</code></li><li><code>DOC_dynamics</code>: expression describing how DOC changes over time, see <code>Agate.Models.Tracers</code></li><li><code>PON_dynamics</code>: expression describing how PON changes over time, see <code>Agate.Models.Tracers</code></li><li><code>DON_dynamics</code>: expression describing how DON changes over time, see <code>Agate.Models.Tracers</code></li><li><code>POP_dynamics</code>: expression describing how POP changes over time, see <code>Agate.Models.Tracers</code></li><li><code>DOP_dynamics</code>: expression describing how DOP changes over time, see <code>Agate.Models.Tracers</code></li><li><code>phyto_dynamics</code>: expression describing how phytoplankton grow, see <code>Agate.Models.Tracers</code></li><li><code>zoo_dynamics</code>: expression describing how zooplankton grow, see <code>Agate.Models.Tracers</code></li><li><code>phyto_args</code>: Dictionary of phytoplankton parameters, for default values see   <code>Agate.Models.Constructors.DEFAULT_PHYTO_ARGS</code></li><li><code>zoo_args</code>: Dictionary of zooplankton parameters, for default values see   <code>Agate.Models.Constructors.DEFAULT_ZOO_ARGS</code></li><li><code>interaction_args</code>: Dictionary of arguments from which a palatability and assimilation  efficiency matrix between all plankton can be computed, for default values see   <code>Agate.Models.Constructors.DEFAULT_INTERACTION_ARGS</code></li><li><code>bgc_args</code>: biogeochemistry parameters related to nutrient and detritus, for default   values see <code>Agate.Models.Constructors.DEFAULT_BGC_ARGS</code></li><li><code>palatability_matrix</code>: optional palatability matrix passed as a NamedArray, if provided  then <code>interaction_args</code> are not used to compute this</li><li><code>assimilation_efficiency_matrix</code>: optional assimilation efficiency matrix passed as a  NamedArray, if provided then <code>interaction_args</code> are not used to compute this</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">using Agate.Constructors: DARWIN

darwin_2p_2z = DARWIN.construct()
darwin_2p_2z_model_obj = darwin_2p_2z()</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/agate-model/Agate.jl/blob/6d977bf28988d9bc4bef55814b07a64e52538a87/src/Constructors/DARWIN.jl#L67-L208">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Agate.Constructors.DARWIN.instantiate" href="#Agate.Constructors.DARWIN.instantiate"><code>Agate.Constructors.DARWIN.instantiate</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">instantiate(
    bgc_type;
    n_phyto=2,
    n_zoo=2,
    phyto_diameters=Dict(
        &quot;min_diameter&quot; =&gt; 2, &quot;max_diameter&quot; =&gt; 10, &quot;splitting&quot; =&gt; &quot;log_splitting&quot;
    ),
    zoo_diameters=Dict(
        &quot;min_diameter&quot; =&gt; 20, &quot;max_diameter&quot; =&gt; 100, &quot;splitting&quot; =&gt; &quot;linear_splitting&quot;
    ),
    phyto_args=DEFAULT_PHYTO_ARGS,
    zoo_args=DEFAULT_ZOO_ARGS,
    interaction_args=DEFAULT_INTERACTION_ARGS,
    bgc_args=DEFAULT_BGC_ARGS,
    palatability_matrix=nothing,
    assimilation_efficiency_matrix=nothing,
) -&gt; bgc_type</code></pre><p>A function to instantiate an object of <code>bgc_type</code> returned by <code>DARWIN.construct()</code>.</p><p>The type specifies the number of phytoplankton and zooplankton in the model and includes default parameter values. The instantiate method is used to override the default values of any of the model parameters or plankton diameters.</p><div class="admonition is-success"><header class="admonition-header">Tip</header><div class="admonition-body"><p>Changing the parameter values of an existing DARWIN model type using <code>instantiate()</code> is useful in  dynamic programming contexts such as <code>for</code> loops. </p></div></div><p><strong>Arguments</strong></p><ul><li><code>bgc_type</code>: subtype of Oceananigans.Biogeochemistry returned by <code>DARWIN.construct()</code>  with a specified number of phytoplankton and zooplankton</li></ul><p><strong>Keywords</strong></p><ul><li><code>phyto_diameters</code>: dictionary from which <code>phyto</code> diameters can be computed or a list of   values to use (as many as the model expects)</li><li><code>zoo_diameters</code>: dictionary from which <code>zoo</code> diameters can be computed or a list of   values to use (as many as the model expects)</li><li><code>nutrient_dynamics</code>: expression describing how nutrients change over time, see   <code>Agate.Models.Tracers</code></li><li><code>detritus_dynamics</code>: expression describing how detritus evolves over time, see   <code>Agate.Models.Tracers</code></li><li><code>phyto_dynamics</code>: expression describing how phytoplankton grow, see <code>Agate.Models.Tracers</code></li><li><code>zoo_dynamics</code>: expression describing how zooplankton grow, see <code>Agate.Models.Tracers</code></li><li><code>phyto_args</code>: Dictionary of phytoplankton parameters, for default values see   <code>Agate.Models.Constructors.DEFAULT_PHYTO_ARGS</code></li><li><code>zoo_args</code>: Dictionary of zooplankton parameters, for default values see   <code>Agate.Models.Constructors.DEFAULT_ZOO_ARGS</code></li><li><code>interaction_args</code>: Dictionary of arguments from which a palatability and assimilation  efficiency matrix between all plankton can be computed, for default values see   <code>Agate.Models.Constructors.DEFAULT_INTERACTION_ARGS</code></li><li><code>bgc_args</code>: Dictionary of constant parameters used in growth functions (i.e., not size   dependant plankton parameters as well as biogeochemistry parameters related to nutrient   and detritus, for default values see <code>Agate.Models.Constructors.DEFAULT_CONSTANT_ARGS</code></li><li><code>palatability_matrix</code>: optional palatability matrix passed as a NamedArray, if provided   then <code>interaction_args</code> are not used to compute this</li><li><code>assimilation_efficiency_matrix</code>: optional assimilation efficiency matrix passed as a   NamedArray, if provided then <code>interaction_args</code> are not used to compute this</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">using Agate.Constructors: DARWIN

darwin_2p_2z = DARWIN.construct()

# change some parameter values
phyto_args = DARWIN.DEFAULT_PHYTO_ARGS
phyto_args[&quot;allometry&quot;][&quot;maximum_growth_rate&quot;][&quot;a&quot;] = 2
darwin_2p_2z_model_obj = DARWIN.instantiate(darwin_2p_2z; phyto_args=phyto_args)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/agate-model/Agate.jl/blob/6d977bf28988d9bc4bef55814b07a64e52538a87/src/Constructors/DARWIN.jl#L278-L349">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../nipizd/">« NiPiZD</a><a class="docs-footer-nextpage" href="../library/">Library »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Tuesday 25 February 2025 17:38">Tuesday 25 February 2025</span>. Using Julia version 1.10.8.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
